<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Customer Dashboard</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body {
           background: url('https://media1.thehungryjpeg.com/thumbs2/ori_3619845_p3uvpcnyt6h5dgc08o8j4wl6ltzo6n8haltpblnj_soap-bubbles-background.jpg') 
    no-repeat center center fixed;
  background-size: cover;
  min-height: 100vh;
  color: white;
  font-family: 'Inter', sans-serif;
        }
        .navbar {
            background-color: #048aff;
        }
        .card {
            background-color: white;
            color: #212529;
            border-radius: 1rem;
            box-shadow: 0 .5rem 1rem rgba(0,0,0,.15);
        }
        .modal-content {
            border-radius: 1rem;
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header class="navbar navbar-expand-lg navbar-dark">
        <div class="container-fluid">
            <a class="navbar-brand fs-4 fw-bold" href="#">LaundryHand</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse justify-content-end" id="navbarNav">
                <ul class="navbar-nav">
                    <li class="nav-item">
                        <a class="nav-link" href="customerdashboard.html">Dashboard</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="login.html">Logout</a>
                    </li>
                </ul>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="container py-5">
        <div class="card p-5 text-center mb-4">
            <h1 class="h3 fw-bold mb-2">Customer Dashboard</h1>
            <p class="lead text-muted">Welcome back, User!</p>
            <button type="button" class="btn btn-primary rounded-pill fw-semibold shadow-sm mt-3" data-bs-toggle="modal" data-bs-target="#createOrderModal">Create New Order</button>
        </div>

        <div class="row g-4">
            <!-- My Orders -->
            <div class="col-lg-8">
                <div class="card p-4 h-100">
                    <h2 class="h5 fw-bold mb-4">My Orders</h2>
                    <div id="myOrdersList" class="text-muted py-2"></div>


                </div>
            </div>

            <!-- Order Summary -->
            <div class="col-lg-4">
                <div class="card p-4 h-100">
                    <h2 class="h5 fw-bold mb-4">Order Summary</h2>
                    <div class="row g-2">
                        <div class="col-6">
                            <div class="p-3 text-center bg-primary text-white rounded-3">
                                <p class="display-6 fw-bold mb-0">0</p>
                                <p class="mb-0">Total Orders</p>
                            </div>
                        </div>
                        <div class="col-6">
                            <div class="p-3 text-center bg-success text-white rounded-3">
                                <p class="display-6 fw-bold mb-0">₱0.00</p>
                                <p class="mb-0">Total Amount</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Create Order Modal -->
    <div class="modal fade" id="createOrderModal" tabindex="-1" aria-labelledby="createOrderModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="createOrderModalLabel">Create New Laundry Order</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                   <form id="orderForm">
                        <div class="mb-3">
                            <label for="weight" class="form-label text-muted">Weight (kg)</label>
                            <input type="number" class="form-control rounded-pill" id="weight" name="weight" placeholder="Enter weight in kg" required>
                        </div>
                        <div class="mb-3">
                            <label for="soap_type" class="form-label text-muted">Soap Type</label>
                            <select class="form-select rounded-pill" id="soap_type" name="soap_type">
                                <option value="regular">Regular (₱5/kg)</option>
                                <option value="premium">Premium (₱10/kg)</option>
                            </select>
                        </div>
                        <div class="mb-3">
                            <label for="fabric_conditioner" class="form-label text-muted">Fabric Conditioner</label>
                            <select class="form-select rounded-pill" id="fabric_conditioner" name="fabric_conditioner">
                                <option value="none">None (₱0)</option>
                                <option value="yes">Yes (₱5)</option>
                            </select>
                        </div>
                        <div class="mb-4">
                            <label for="instructions" class="form-label text-muted">Special Instructions</label>
                            <textarea class="form-control rounded-3" id="instructions" name="instructions" rows="3" placeholder="Add any special instructions"></textarea>
                        </div>
                        <div class="text-center mb-4">
                            <p class="h5 fw-bold">Estimated Total: <span id="estimated_total">₱0.00</span></p>
                        </div>
                        <button type="submit" class="btn btn-primary w-100 rounded-pill fw-semibold shadow-sm">Create Order</button>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  <script>
  document.getElementById("orderForm").addEventListener("submit", function (e) {
    e.preventDefault();

    const weight = parseFloat(document.getElementById("weight").value) || 0;
    const soapType = document.getElementById("soap_type").value;
    const conditioner = document.getElementById("fabric_conditioner").value;
    const instructions = document.getElementById("instructions").value;
    const soapPrice = soapType === "regular" ? 5 : 10;
    const conditionerPrice = conditioner === "none" ? 0 : 5;
    const total = (weight * soapPrice) + conditionerPrice;
    const username = localStorage.getItem("username") || "User";

    const newOrder = {
      weight,
      soapType,
      fabric_conditioner: conditioner,
      instructions,
      total,
      customerName: username
    };

    const orders = JSON.parse(localStorage.getItem("orders")) || [];
    orders.push(newOrder);
    localStorage.setItem("orders", JSON.stringify(orders));

    const modal = bootstrap.Modal.getInstance(document.getElementById("createOrderModal"));
    modal.hide();

    location.reload();
  });
</script>
<script>
  document.addEventListener("DOMContentLoaded", function () {
    const orders = JSON.parse(localStorage.getItem("orders")) || [];
    const username = localStorage.getItem("username") || "User";
    const myOrdersList = document.getElementById("myOrdersList");

    const myOrders = orders.filter(order => order.customerName === username);

    if (myOrders.length === 0) {
      myOrdersList.innerHTML = `<p class="text-center text-muted py-5">No orders yet. Create your first order!</p>`;
    } else {
      myOrdersList.innerHTML = myOrders.map((order, index) => `
        <div class="border-bottom py-3">
          <p><strong>Order #${index + 1}</strong></p>
          <p>Weight: ${order.weight} kg</p>
          <p>Soap Type: ${order.soapType}</p>
          <p>Fabric Conditioner: ${order.fabric_conditioner}</p>
          <p>Instructions: ${order.instructions || "None"}</p>
          <p>Total: <strong>₱${order.total.toFixed(2)}</strong></p>
        </div>
      `).join('');
    }

    const totalOrders = myOrders.length;
    const totalAmount = myOrders.reduce((sum, order) => sum + order.total, 0);
    document.querySelector(".bg-primary .display-6").textContent = totalOrders;
    document.querySelector(".bg-success .display-6").textContent = `₱${totalAmount.toFixed(2)}`;
  });
</script>

</body>
</html>