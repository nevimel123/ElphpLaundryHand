<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LaundryHand - Complete Laundry Management System</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #1e40af 0%, #3b82f6 50%, #60a5fa 100%);
            min-height: 100vh;
            overflow-x: hidden;
        }

        /* Bubble animations */
        .bubbles {
            position: absolute;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 0;
        }

        .bubble {
            position: absolute;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 50%;
            animation: float 8s infinite ease-in-out;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0px) rotate(0deg); opacity: 0.7; }
            50% { transform: translateY(-20px) rotate(180deg); opacity: 1; }
        }

        .navbar {
            background: rgba(30, 64, 175, 0.9);
            backdrop-filter: blur(10px);
            padding: 1rem 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: sticky;
            top: 0;
            z-index: 1000;
        }

        .logo {
            color: white;
            font-size: 1.5rem;
            font-weight: bold;
        }

        .nav-links {
            display: flex;
            gap: 1rem;
        }

        .nav-btn {
            background: transparent;
            border: 1px solid rgba(255, 255, 255, 0.3);
            color: white;
            padding: 0.5rem 1rem;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .nav-btn:hover {
            background: rgba(255, 255, 255, 0.1);
            transform: translateY(-1px);
        }

        .nav-btn.active {
            background: rgba(255, 255, 255, 0.2);
        }

        .container {
            position: relative;
            z-index: 1;
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem;
        }

        .page {
            display: none;
            animation: fadeIn 0.5s ease-in;
        }

        .page.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .welcome-card {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 3rem;
            text-align: center;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            margin-bottom: 3rem;
        }

        .welcome-title {
            font-size: 3rem;
            color: #1e40af;
            margin-bottom: 1rem;
            font-weight: bold;
        }

        .welcome-subtitle {
            font-size: 1.2rem;
            color: #64748b;
            margin-bottom: 2rem;
        }

        .get-started-btn {
            background: #2563eb;
            color: white;
            padding: 1rem 2rem;
            border: none;
            border-radius: 10px;
            font-size: 1.1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(37, 99, 235, 0.3);
        }

        .get-started-btn:hover {
            background: #1d4ed8;
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(37, 99, 235, 0.4);
        }

        .features-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
            margin-top: 2rem;
        }

        .feature-card {
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 2rem;
            text-align: center;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
        }

        .feature-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.15);
        }

        .feature-title {
            font-size: 1.3rem;
            color: #1e40af;
            margin-bottom: 1rem;
            font-weight: 600;
        }

        .feature-desc {
            color: #64748b;
            line-height: 1.6;
        }

        .form-container {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 2rem;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            max-width: 500px;
            margin: 0 auto;
        }

        .form-title {
            font-size: 2rem;
            color: #1e40af;
            text-align: center;
            margin-bottom: 2rem;
            font-weight: bold;
        }

        .form-group {
            margin-bottom: 1.5rem;
        }

        .form-label {
            display: block;
            margin-bottom: 0.5rem;
            color: #374151;
            font-weight: 500;
        }

        .form-input {
            width: 100%;
            padding: 0.75rem;
            border: 1px solid #d1d5db;
            border-radius: 8px;
            font-size: 1rem;
            transition: border-color 0.3s ease;
        }

        .form-input:focus {
            outline: none;
            border-color: #2563eb;
            box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.1);
        }

        .form-select {
            width: 100%;
            padding: 0.75rem;
            border: 1px solid #d1d5db;
            border-radius: 8px;
            font-size: 1rem;
            background: white;
        }

        .form-btn {
            width: 100%;
            background: #2563eb;
            color: white;
            padding: 1rem;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-bottom: 1rem;
        }

        .form-btn:hover {
            background: #1d4ed8;
            transform: translateY(-1px);
        }

        .dashboard-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
            margin-bottom: 2rem;
        }

        .dashboard-card {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 1.5rem;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        }

        .card-header {
            font-size: 1.2rem;
            color: #1e40af;
            margin-bottom: 1rem;
            font-weight: 600;
            border-bottom: 2px solid #e5e7eb;
            padding-bottom: 0.5rem;
        }

        .order-item {
            background: #f8fafc;
            border-radius: 8px;
            padding: 1rem;
            margin-bottom: 1rem;
            border-left: 4px solid #2563eb;
        }

        .order-id {
            font-weight: bold;
            color: #1e40af;
        }

        .order-status {
            display: inline-block;
            padding: 0.3rem 0.8rem;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 500;
            margin-top: 0.5rem;
        }

        .status-pending { background: #fef3c7; color: #d97706; }
        .status-in-progress { background: #dbeafe; color: #2563eb; }
        .status-ready { background: #d1fae5; color: #059669; }
        .status-picked-up { background: #f3e8ff; color: #7c3aed; }

        .admin-controls {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 2rem;
            margin-bottom: 2rem;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        }

        .btn-group {
            display: flex;
            gap: 1rem;
            margin-bottom: 2rem;
            flex-wrap: wrap;
        }

        .btn {
            background: #2563eb;
            color: white;
            padding: 0.75rem 1.5rem;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .btn:hover {
            background: #1d4ed8;
            transform: translateY(-1px);
        }

        .btn-secondary {
            background: #6b7280;
        }

        .btn-secondary:hover {
            background: #4b5563;
        }

        .btn-success {
            background: #059669;
        }

        .btn-success:hover {
            background: #047857;
        }

        .btn-danger {
            background: #dc2626;
        }

        .btn-danger:hover {
            background: #b91c1c;
        }

        .table {
            width: 100%;
            border-collapse: collapse;
            background: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        .table th,
        .table td {
            padding: 1rem;
            text-align: left;
            border-bottom: 1px solid #e5e7eb;
        }

        .table th {
            background: #f8fafc;
            font-weight: 600;
            color: #374151;
        }

        .table tbody tr:hover {
            background: #f8fafc;
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 2000;
        }

        .modal.active {
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .modal-content {
            background: white;
            border-radius: 15px;
            padding: 2rem;
            max-width: 500px;
            width: 90%;
            max-height: 90vh;
            overflow-y: auto;
        }

        .modal-header {
            font-size: 1.5rem;
            color: #1e40af;
            margin-bottom: 1rem;
            font-weight: bold;
        }

        .close-btn {
            float: right;
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: #6b7280;
            margin-top: -0.5rem;
        }

        .alert {
            padding: 1rem;
            border-radius: 8px;
            margin-bottom: 1rem;
            display: none;
        }

        .alert.show {
            display: block;
        }

        .alert-success {
            background: #d1fae5;
            color: #065f46;
            border-left: 4px solid #059669;
        }

        .alert-error {
            background: #fee2e2;
            color: #991b1b;
            border-left: 4px solid #dc2626;
        }

        .summary-card {
            background: linear-gradient(135deg, #2563eb, #3b82f6);
            color: white;
            border-radius: 15px;
            padding: 2rem;
            text-align: center;
            margin-bottom: 2rem;
        }

        .summary-number {
            font-size: 2.5rem;
            font-weight: bold;
            margin-bottom: 0.5rem;
        }

        .summary-label {
            font-size: 1rem;
            opacity: 0.9;
        }

        .hidden {
            display: none;
        }

        @media (max-width: 768px) {
            .navbar {
                padding: 1rem;
                flex-direction: column;
                gap: 1rem;
            }

            .welcome-title {
                font-size: 2rem;
            }

            .container {
                padding: 1rem;
            }

            .welcome-card {
                padding: 2rem;
            }

            .btn-group {
                flex-direction: column;
            }

            .table {
                font-size: 0.9rem;
            }

            .table th,
            .table td {
                padding: 0.5rem;
            }
        }
    </style>
</head>
<body>
    <!-- Animated bubbles background -->
    <div class="bubbles" id="bubbles"></div>

    <!-- Navigation -->
    <nav class="navbar">
        <div class="logo">LaundryHand</div>
        <div class="nav-links">
            <button class="nav-btn active" onclick="showPage('home')">Home</button>
            <button class="nav-btn" onclick="showPage('register')">Register</button>
            <button class="nav-btn" onclick="showPage('login')">Login</button>
            <button class="nav-btn hidden" id="dashboardBtn" onclick="showPage('dashboard')">Dashboard</button>
            <button class="nav-btn hidden" id="adminBtn" onclick="showPage('admin')">Admin</button>
            <button class="nav-btn hidden" id="logoutBtn" onclick="logout()">Logout</button>
        </div>
    </nav>

    <div class="container">
        <!-- Alerts -->
        <div id="alert" class="alert">
            <span id="alertMessage"></span>
        </div>

        <!-- Home Page -->
        <div id="home" class="page active">
            <div class="welcome-card">
                <h1 class="welcome-title">Welcome to LaundryHand</h1>
                <p class="welcome-subtitle">Track your laundry orders, check details, and stay updated in real time.</p>
                <button class="get-started-btn" onclick="showPage('register')">Get Started</button>
            </div>

            <div class="features-grid">
                <div class="feature-card">
                    <h3 class="feature-title">Real-Time Updates</h3>
                    <p class="feature-desc">Know your laundry status anytime, anywhere.</p>
                </div>
                <div class="feature-card">
                    <h3 class="feature-title">Transparent Billing</h3>
                    <p class="feature-desc">View exact details of weight, soap, and fabric conditioner used.</p>
                </div>
                <div class="feature-card">
                    <h3 class="feature-title">Easy Access</h3>
                    <p class="feature-desc">Login and check your laundry updates on any device.</p>
                </div>
            </div>
        </div>

        <!-- Register Page -->
        <div id="register" class="page">
            <div class="form-container">
                <h2 class="form-title">Create Account</h2>
                <form id="registerForm" onsubmit="registerUser(event)">
                    <div class="form-group">
                        <label class="form-label">Full Name</label>
                        <input type="text" class="form-input" name="name" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Email</label>
                        <input type="email" class="form-input" name="email" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Phone Number</label>
                        <input type="tel" class="form-input" name="phone" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Address</label>
                        <textarea class="form-input" name="address" rows="3" required></textarea>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Password</label>
                        <input type="password" class="form-input" name="password" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Account Type</label>
                        <select class="form-select" name="userType">
                            <option value="customer">Customer</option>
                            <option value="admin">Admin</option>
                        </select>
                    </div>
                    <button type="submit" class="form-btn">Create Account</button>
                    <p style="text-align: center; color: #6b7280;">
                        Already have an account? <a href="#" onclick="showPage('login')" style="color: #2563eb;">Login here</a>
                    </p>
                </form>
            </div>
        </div>

        <!-- Login Page -->
        <div id="login" class="page">
            <div class="form-container">
                <h2 class="form-title">Login</h2>
                <form id="loginForm" onsubmit="loginUser(event)">
                    <div class="form-group">
                        <label class="form-label">Email</label>
                        <input type="email" class="form-input" name="email" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Password</label>
                        <input type="password" class="form-input" name="password" required>
                    </div>
                    <button type="submit" class="form-btn">Login</button>
                    <p style="text-align: center; color: #6b7280;">
                        Don't have an account? <a href="#" onclick="showPage('register')" style="color: #2563eb;">Register here</a>
                    </p>
                </form>
            </div>
        </div>

        <!-- Customer Dashboard -->
        <div id="dashboard" class="page">
            <div class="welcome-card">
                <h1 class="welcome-title">Customer Dashboard</h1>
                <p class="welcome-subtitle">Welcome back, <span id="customerName"></span>!</p>
                <button class="get-started-btn" onclick="openModal('newOrderModal')">Create New Order</button>
            </div>

            <div class="dashboard-grid">
                <div class="dashboard-card">
                    <div class="card-header">My Orders</div>
                    <div id="customerOrders">
                        <!-- Orders will be populated here -->
                    </div>
                </div>
                <div class="dashboard-card">
                    <div class="card-header">Order Summary</div>
                    <div id="orderSummary">
                        <div class="summary-card">
                            <div class="summary-number" id="totalOrders">0</div>
                            <div class="summary-label">Total Orders</div>
                        </div>
                        <div class="summary-card" style="background: linear-gradient(135deg, #059669, #10b981);">
                            <div class="summary-number" id="totalAmount">₱0.00</div>
                            <div class="summary-label">Total Amount</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Admin Page -->
        <div id="admin" class="page">
            <div class="welcome-card">
                <h1 class="welcome-title">Admin Dashboard</h1>
                <p class="welcome-subtitle">Manage all laundry orders and customers</p>
            </div>

            <div class="admin-controls">
                <div class="btn-group">
                    <button class="btn" onclick="refreshAdminData()">Refresh Data</button>
                    <button class="btn btn-secondary" onclick="showAllOrders()">All Orders</button>
                    <button class="btn btn-secondary" onclick="showAllCustomers()">All Customers</button>
                </div>

                <div id="adminContent">
                    <h3>All Orders</h3>
                    <table class="table" id="ordersTable">
                        <thead>
                            <tr>
                                <th>Order ID</th>
                                <th>Customer</th>
                                <th>Status</th>
                                <th>Weight (kg)</th>
                                <th>Services</th>
                                <th>Total Amount</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="ordersTableBody">
                            <!-- Orders will be populated here -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <!-- Modals -->
    <!-- New Order Modal -->
    <div id="newOrderModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                Create New Laundry Order
                <button class="close-btn" onclick="closeModal('newOrderModal')">&times;</button>
            </div>
            <form id="newOrderForm" onsubmit="createOrder(event)">
                <div class="form-group">
                    <label class="form-label">Weight (kg)</label>
                    <input type="number" class="form-input" name="weight" min="1" step="0.1" required onchange="calculateTotal()">
                </div>
                <div class="form-group">
                    <label class="form-label">Soap Type</label>
                    <select class="form-select" name="soap" onchange="calculateTotal()">
                        <option value="Regular">Regular (₱5/kg)</option>
                        <option value="Premium">Premium (₱8/kg)</option>
                        <option value="Eco-friendly">Eco-friendly (₱10/kg)</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label">Fabric Conditioner</label>
                    <select class="form-select" name="conditioner" onchange="calculateTotal()">
                        <option value="None">None (₱0)</option>
                        <option value="Regular">Regular (₱3/kg)</option>
                        <option value="Premium">Premium (₱5/kg)</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label">Special Instructions</label>
                    <textarea class="form-input" name="instructions" rows="3"></textarea>
                </div>
                <div class="form-group">
                    <label class="form-label">Estimated Total: <span id="estimatedTotal">₱0.00</span></label>
                </div>
                <button type="submit" class="form-btn">Create Order</button>
            </form>
        </div>
    </div>

    <!-- Edit Order Modal -->
    <div id="editOrderModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                Update Order Status
                <button class="close-btn" onclick="closeModal('editOrderModal')">&times;</button>
            </div>
            <form id="editOrderForm" onsubmit="updateOrder(event)">
                <input type="hidden" name="orderId">
                <div class="form-group">
                    <label class="form-label">Order Status</label>
                    <select class="form-select" name="status">
                        <option value="Pending">Pending</option>
                        <option value="In-progress">In-progress</option>
                        <option value="Ready for Pickup">Ready for Pickup</option>
                        <option value="Picked Up">Picked Up</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label">Actual Weight (kg)</label>
                    <input type="number" class="form-input" name="actualWeight" min="1" step="0.1">
                </div>
                <div class="form-group">
                    <label class="form-label">Final Amount</label>
                    <input type="number" class="form-input" name="finalAmount" min="0" step="0.01">
                </div>
                <button type="submit" class="form-btn">Update Order</button>
            </form>
        </div>
    </div>

    <script>
        // Application state
        let currentUser = null;
        let users = [];
        let orders = [];
        let orderIdCounter = 1000;

        // Initialize app
        document.addEventListener('DOMContentLoaded', function() {
            createBubbles();
            loadData();
        });

        // Create animated bubbles
        function createBubbles() {
            const bubblesContainer = document.getElementById('bubbles');
            for (let i = 0; i < 20; i++) {
                const bubble = document.createElement('div');
                bubble.className = 'bubble';
                bubble.style.left = Math.random() * 100 + '%';
                bubble.style.top = Math.random() * 100 + '%';
                bubble.style.width = Math.random() * 60 + 20 + 'px';
                bubble.style.height = bubble.style.width;
                bubble.style.animationDelay = Math.random() * 8 + 's';
                bubble.style.animationDuration = (Math.random() * 3 + 5) + 's';
                bubblesContainer.appendChild(bubble);
            }
        }

        // Load data (using in-memory storage)
        function loadData() {
            // Sample data for demonstration
            users = [
                { id: 1, name: 'Admin User', email: 'admin@laundryhand.com', phone: '09123456789', address: 'Admin Address', userType: 'admin' },
                { id: 2, name: 'John Doe', email: 'john@example.com', phone: '09123456788', address: '123 Main St', userType: 'customer' }
            ];
            
            orders = [
                {
                    id: 'LH1001',
                    customerId: 2,
                    customerName: 'John Doe',
                    weight: 3.5,
                    soap: 'Premium',
                    conditioner: 'Regular',
                    status: 'In-progress',
                    instructions: 'Handle with care',
                    totalAmount: 45.50,
                    dateCreated: new Date().toLocaleDateString(),
                    actualWeight: null,
                    finalAmount: null
                }
            ];
        }

        // Save data (in-memory storage)
        function saveData() {
            // In a real application, this would save to a backend
            console.log('Data saved to memory');
        }

        // Navigation functions
        function showPage(pageId) {
            // Hide all pages
            const pages = document.querySelectorAll('.page');
            pages.forEach(page => page.classList.remove('active'));

            // Show selected page
            document.getElementById(pageId).classList.add('active');

            // Update nav buttons
            const navBtns = document.querySelectorAll('.nav-btn');
            navBtns.forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');

            // Load page-specific data
            if (pageId === 'dashboard' && currentUser) {
                loadCustomerDashboard();
            } else if (pageId === 'admin' && currentUser) {
                loadAdminDashboard();
            }
        }

        // Alert functions
        function showAlert(message, type = 'success') {
            const alert = document.getElementById('alert');
            const alertMessage = document.getElementById('alertMessage');
            
            alert.className = `alert alert-${type} show`;
            alertMessage.textContent = message;
            
            setTimeout(() => {
                alert.classList.remove('show');
            }, 5000);
        }

        // Modal functions
        function openModal(modalId) {
            document.getElementById(modalId).classList.add('active');
        }

        function closeModal(modalId) {
            document.getElementById(modalId).classList.remove('active');
        }

        // User registration
        function registerUser(event) {
            event.preventDefault();
            const form = event.target;
            const formData = new FormData(form);
            
            const userData = {
                id: users.length + 1,
                name: formData.get('name'),
                email: formData.get('email'),
                phone: formData.get('phone'),
                address: formData.get('address'),
                password: formData.get('password'),
                userType: formData.get('userType')
            };

            // Check if email already exists
            if (users.find(user => user.email === userData.email)) {
                showAlert('Email already exists!', 'error');
                return;
            }

            users.push(userData);
            saveData();
            showAlert('Account created successfully! Please login.');
            form.reset();
            showPage('login');
        }

        // User login
        function loginUser(event) {
            event.preventDefault();
            const form = event.target;
            const formData = new FormData(form);
            
            const email = formData.get('email');
            const password = formData.get('password');

            const user = users.find(u => u.email === email && u.password === password);
            
            if (user) {
                currentUser = user;
                showAlert(`Welcome back, ${user.name}!`);
                
                // Update navigation
                document.getElementById('dashboardBtn').classList.remove('hidden');
                document.getElementById('logoutBtn').classList.remove('hidden');
                
                if (user.userType === 'admin') {
                    document.getElementById('adminBtn').classList.remove('hidden');
                    showPage('admin');
                } else {
                    showPage('dashboard');
                }
            } else {
                showAlert('Invalid email or password!', 'error');
            }
        }

        // User logout
        function logout() {
            currentUser = null;
            
            // Hide user-specific nav buttons
            document.getElementById('dashboardBtn').classList.add('hidden');
            document.getElementById('adminBtn').classList.add('hidden');
            document.getElementById('logoutBtn').classList.add('hidden');
            
            showAlert('Logged out successfully!');
            showPage('home');
        }

        // Load customer dashboard
        function loadCustomerDashboard() {
            if (!currentUser) return;
            
            document.getElementById('customerName').textContent = currentUser.name;
            
            const customerOrders = orders.filter(order => order.customerId === currentUser.id);
            const ordersContainer = document.getElementById('customerOrders');
            
            if (customerOrders.length === 0) {
                ordersContainer.innerHTML = '<p style="color: #6b7280; text-align: center;">No orders yet. Create your first order!</p>';
            } else {
                ordersContainer.innerHTML = customerOrders.map(order => `
                    <div class="order-item">
                        <div class="order-id">Order #${order.id}</div>
                        <p><strong>Weight:</strong> ${order.weight} kg</p>
                        <p><strong>Services:</strong> ${order.soap} soap, ${order.conditioner} conditioner</p>
                        <p><strong>Amount:</strong> ₱${order.totalAmount.toFixed(2)}</p>
                        <p><strong>Date:</strong> ${order.dateCreated}</p>
                        <span class="order-status status-${order.status.toLowerCase().replace(' ', '-')}">${order.status}</span>
                    </div>
                `).join('');
            }
            
            // Update summary
            document.getElementById('totalOrders').textContent = customerOrders.length;
            const totalAmount = customerOrders.reduce((sum, order) => sum + order.totalAmount, 0);
            document.getElementById('totalAmount').textContent = `₱${totalAmount.toFixed(2)}`;
        }

        // Calculate order total
        function calculateTotal() {
            const form = document.getElementById('newOrderForm');
            const weight = parseFloat(form.weight.value) || 0;
            const soap = form.soap.value;
            const conditioner = form.conditioner.value;
            
            let soapPrice = 0;
            let conditionerPrice = 0;
            
            // Soap prices per kg
            switch(soap) {
                case 'Regular': soapPrice = 5; break;
                case 'Premium': soapPrice = 8; break;
                case 'Eco-friendly': soapPrice = 10; break;
            }
            
            // Conditioner prices per kg
            switch(conditioner) {
                case 'Regular': conditionerPrice = 3; break;
                case 'Premium': conditionerPrice = 5; break;
                case 'None': conditionerPrice = 0; break;
            }
            
            const total = (soapPrice + conditionerPrice) * weight;
            document.getElementById('estimatedTotal').textContent = `₱${total.toFixed(2)}`;
        }

        // Create new order
        function createOrder(event) {
            event.preventDefault();
            if (!currentUser) return;
            
            const form = event.target;
            const formData = new FormData(form);
            
            const order = {
                id: 'LH' + (orderIdCounter++),
                customerId: currentUser.id,
                customerName: currentUser.name,
                weight: parseFloat(formData.get('weight')),
                soap: formData.get('soap'),
                conditioner: formData.get('conditioner'),
                status: 'Pending',
                instructions: formData.get('instructions'),
                totalAmount: parseFloat(document.getElementById('estimatedTotal').textContent.replace('₱', '')),
                dateCreated: new Date().toLocaleDateString(),
                actualWeight: null,
                finalAmount: null
            };
            
            orders.push(order);
            saveData();
            showAlert('Order created successfully!');
            closeModal('newOrderModal');
            form.reset();
            loadCustomerDashboard();
        }

        // Load admin dashboard
        function loadAdminDashboard() {
            showAllOrders();
        }

        // Show all orders in admin
        function showAllOrders() {
            const tbody = document.getElementById('ordersTableBody');
            tbody.innerHTML = orders.map(order => `
                <tr>
                    <td>${order.id}</td>
                    <td>${order.customerName}</td>
                    <td><span class="order-status status-${order.status.toLowerCase().replace(' ', '-')}">${order.status}</span></td>
                    <td>${order.actualWeight || order.weight} kg</td>
                    <td>${order.soap} soap, ${order.conditioner} conditioner</td>
                    <td>₱${(order.finalAmount || order.totalAmount).toFixed(2)}</td>
                    <td>
                        <button class="btn btn-secondary" onclick="editOrder('${order.id}')">Edit</button>
                        <button class="btn btn-danger" onclick="deleteOrder('${order.id}')">Delete</button>
                    </td>
                </tr>
            `).join('');
        }

        // Show all customers
        function showAllCustomers() {
            const adminContent = document.getElementById('adminContent');
            const customers = users.filter(user => user.userType === 'customer');
            
            adminContent.innerHTML = `
                <h3>All Customers</h3>
                <table class="table">
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>Name</th>
                            <th>Email</th>
                            <th>Phone</th>
                            <th>Address</th>
                            <th>Orders</th>
                            <th>Total Spent</th>
                        </tr>
                    </thead>
                    <tbody>
                        ${customers.map(customer => {
                            const customerOrders = orders.filter(order => order.customerId === customer.id);
                            const totalSpent = customerOrders.reduce((sum, order) => sum + order.totalAmount, 0);
                            return `
                                <tr>
                                    <td>${customer.id}</td>
                                    <td>${customer.name}</td>
                                    <td>${customer.email}</td>
                                    <td>${customer.phone}</td>
                                    <td>${customer.address}</td>
                                    <td>${customerOrders.length}</td>
                                    <td>₱${totalSpent.toFixed(2)}</td>
                                </tr>
                            `;
                        }).join('')}
                    </tbody>
                </table>
            `;
        }

        // Edit order
        function editOrder(orderId) {
            const order = orders.find(o => o.id === orderId);
            if (!order) return;
            
            const form = document.getElementById('editOrderForm');
            form.orderId.value = order.id;
            form.status.value = order.status;
            form.actualWeight.value = order.actualWeight || order.weight;
            form.finalAmount.value = order.finalAmount || order.totalAmount;
            
            openModal('editOrderModal');
        }

        // Update order
        function updateOrder(event) {
            event.preventDefault();
            const form = event.target;
            const formData = new FormData(form);
            
            const orderId = formData.get('orderId');
            const orderIndex = orders.findIndex(o => o.id === orderId);
            
            if (orderIndex !== -1) {
                orders[orderIndex].status = formData.get('status');
                orders[orderIndex].actualWeight = parseFloat(formData.get('actualWeight'));
                orders[orderIndex].finalAmount = parseFloat(formData.get('finalAmount'));
                
                saveData();
                showAlert('Order updated successfully!');
                closeModal('editOrderModal');
                loadAdminDashboard();
            }
        }

        // Delete order
        function deleteOrder(orderId) {
            if (confirm('Are you sure you want to delete this order?')) {
                const orderIndex = orders.findIndex(o => o.id === orderId);
                if (orderIndex !== -1) {
                    orders.splice(orderIndex, 1);
                    saveData();
                    showAlert('Order deleted successfully!');
                    loadAdminDashboard();
                }
            }
        }

        // Refresh admin data
        function refreshAdminData() {
            showAlert('Data refreshed!');
            loadAdminDashboard();
        }

        // Close modals when clicking outside
        window.onclick = function(event) {
            if (event.target.classList.contains('modal')) {
                event.target.classList.remove('active');
            }
        }
    </script>
</body>
</html>